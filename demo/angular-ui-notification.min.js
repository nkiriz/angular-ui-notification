/**
 * nk-angular-ui-notification - Fork of the library angular-ui-notification (https://github.com/alexcrack/angular-ui-notification) done on May 22, 2017
 * @author Nikola Kiriz
 * @version v0.0.1
 * @link https://github.com/nkiriz/nk-angular-ui-notification
 * @license MIT
 */
angular.module("ui-notification").run(["$templateCache",function(t){t.put("angular-ui-notification.html",'<div class="ui-notification"><h3 ng-show="title" ng-bind-html="title"></h3><div class="message" ng-bind-html="message"></div></div>')}]),angular.module("ui-notification",[]),angular.module("ui-notification").provider("Notification",function(){this.options={delay:6e3,startTop:10,startRight:10,verticalSpacing:10,horizontalSpacing:10,positionX:"right",positionY:"top",replaceMessage:!1,templateUrl:"angular-ui-notification.html",onClose:void 0,closeOnClick:!1,maxCount:0,container:"body",priority:10},this.setOptions=function(t){if(!angular.isObject(t))throw new Error("Options should be an object!");this.options=angular.extend({},this.options,t)},this.$get=["$timeout","$http","$compile","$templateCache","$rootScope","$injector","$sce","$q","$window",function(t,i,e,n,o,s,a,r,l){var c=this.options,p=c.startTop,u=c.startRight,d=c.verticalSpacing,m=c.horizontalSpacing,f=c.delay,g=[],h=!1,y=function(s,y){function v(i){function n(){return setTimeout(function(){_.addClass("killed")},s.delay)}function o(t){["-webkit-transition","-o-transition","transition"].forEach(function(i){_.css(i,t)})}var r=s.scope.$new();r.message=a.trustAsHtml(s.message),r.title=a.trustAsHtml(s.title),r.t=s.type.substr(0,1),r.delay=s.delay,r.onClose=s.onClose;var f=function(t,i){return t._priority-i._priority},y=function(t,i){return i._priority-t._priority},v=function(){var t=0,i=0,e=p,n=u,o=[];"top"===s.positionY?g.sort(f):"bottom"===s.positionY&&g.sort(y);for(var a=g.length-1;a>=0;a--){var r=g[a];if(s.replaceMessage&&a<g.length-1)r.addClass("killed");else{var l=parseInt(r[0].offsetHeight),h=parseInt(r[0].offsetWidth),v=o[r._positionY+r._positionX];C+l>window.innerHeight&&(v=p,i++,t=0);var C=e=v?0===t?v:v+d:p,_=n+i*(m+h);r.css(r._positionY,C+"px"),"center"==r._positionX?r.css("left",parseInt(window.innerWidth/2-h/2)+"px"):r.css(r._positionX,_+"px"),o[r._positionY+r._positionX]=C+l,c.maxCount>0&&g.length>c.maxCount&&0===a&&r.scope().kill(!0),t++}}},_=e(i)(r);_._positionY=s.positionY,_._positionX=s.positionX,_._priority=s.priority,_.addClass(s.type);var b=function(t){t=t.originalEvent||t,("click"===t.type||"opacity"===t.propertyName&&t.elapsedTime>=1)&&(r.onClose&&r.$apply(r.onClose(_)),_.remove(),g.splice(g.indexOf(_),1),r.$destroy(),v())};if(s.closeOnClick&&(_.addClass("clickable"),_.bind("click",b)),_.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",b),angular.isNumber(s.delay)){var k=n();_.mouseenter(function(){k&&clearTimeout(k),_.removeClass("killed")}),_.mouseleave(function(){k=n()})}o("none"),angular.element(document.querySelector(s.container)).append(_);var w=-(parseInt(_[0].offsetHeight)+50);if(_.css(_._positionY,w+"px"),g.push(_),"center"==s.positionX){var $=parseInt(_[0].offsetWidth);_.css("left",parseInt(window.innerWidth/2-$/2)+"px")}t(function(){o("")}),r._templateElement=_,r.kill=function(i){i?(r.onClose&&r.$apply(r.onClose(r._templateElement)),g.splice(g.indexOf(r._templateElement),1),r._templateElement.remove(),r.$destroy(),t(v)):r._templateElement.addClass("killed")},t(v),h||(angular.element(l).bind("resize",function(i){t(v)}),h=!0),C.resolve(r)}var C=r.defer();"object"==typeof s&&null!==s||(s={message:s}),s.scope=s.scope?s.scope:o,s.template=s.templateUrl?s.templateUrl:c.templateUrl,s.delay=angular.isUndefined(s.delay)?f:s.delay,s.type=y||s.type||c.type||"",s.positionY=s.positionY?s.positionY:c.positionY,s.positionX=s.positionX?s.positionX:c.positionX,s.replaceMessage=s.replaceMessage?s.replaceMessage:c.replaceMessage,s.onClose=s.onClose?s.onClose:c.onClose,s.closeOnClick=null!==s.closeOnClick&&void 0!==s.closeOnClick?s.closeOnClick:c.closeOnClick,s.container=s.container?s.container:c.container,s.priority=s.priority?s.priority:c.priority;var _=n.get(s.template);return _?v(_):i.get(s.template,{cache:!0}).then(function(t){v(t.data)})["catch"](function(t){throw new Error("Template ("+s.template+") could not be loaded. "+t)}),C.promise};return y.primary=function(t){return this(t,"primary")},y.error=function(t){return this(t,"error")},y.success=function(t){return this(t,"success")},y.info=function(t){return this(t,"info")},y.warning=function(t){return this(t,"warning")},y.clearAll=function(){angular.forEach(g,function(t){t.addClass("killed")})},y}]}),angular.module("ui-notification").run(["$templateCache",function(t){t.put("angular-ui-notification.html",'<div class="ui-notification"><h3 ng-show="title" ng-bind-html="title"></h3><div class="message" ng-bind-html="message"></div></div>')}]);
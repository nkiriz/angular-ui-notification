/**
 * nk-angular-ui-notification - Fork of the library angular-ui-notification (https://github.com/alexcrack/angular-ui-notification) done on May 22, 2017
 * @author Nikola Kiriz
 * @version v0.0.1
 * @link https://github.com/nkiriz/nk-angular-ui-notification
 * @license MIT
 */
angular.module("ui-notification").run(["$templateCache",function(e){e.put("angular-ui-notification.html",'<div class="ui-notification"><h3 ng-show="title" ng-bind-html="title"></h3><div class="message" ng-bind-html="message"></div></div>')}]),angular.module("ui-notification",[]),angular.module("ui-notification").provider("Notification",function(){this.options={delay:6e3,remainingDelay:0,startTop:10,startRight:10,verticalSpacing:10,horizontalSpacing:10,positionX:"right",positionY:"top",replaceMessage:!1,templateUrl:"nk-angular-ui-notification.html",onClose:void 0,closeOnClick:!1,maxCount:0},this.setOptions=function(e){if(!angular.isObject(e))throw new Error("Options should be an object!");this.options=angular.extend({},this.options,e)},this.$get=["$timeout","$http","$compile","$templateCache","$rootScope","$injector","$sce","$q","$window",function(e,t,i,n,o,s,a,l,r){var c=this.options,p=c.startTop,u=c.startRight,d=c.verticalSpacing,m=c.horizontalSpacing,f=c.delay,g=[],h=!1,v=function(s,v){var C=l.defer();return"object"!=typeof s&&(s={message:s}),s.scope=s.scope?s.scope:o,s.template=s.templateUrl?s.templateUrl:c.templateUrl,s.delay=angular.isUndefined(s.delay)?f:s.delay,s.type=v||c.type||"",s.positionY=s.positionY?s.positionY:c.positionY,s.positionX=s.positionX?s.positionX:c.positionX,s.replaceMessage=s.replaceMessage?s.replaceMessage:c.replaceMessage,s.onClose=s.onClose?s.onClose:c.onClose,s.closeOnClick=null!==s.closeOnClick&&void 0!==s.closeOnClick?s.closeOnClick:c.closeOnClick,t.get(s.template,{cache:n}).success(function(t){function n(){return setTimeout(function(){v.addClass("killed")},s.delay)}function o(e){["-webkit-transition","-o-transition","transition"].forEach(function(t){v.css(t,e)})}var l=s.scope.$new();l.message=a.trustAsHtml(s.message),l.title=a.trustAsHtml(s.title),l.t=s.type.substr(0,1),l.delay=s.delay,l.onClose=s.onClose;var f=function(){for(var e=0,t=0,i=p,n=u,o=[],a=g.length-1;a>=0;a--){var l=g[a];if(s.replaceMessage&&a<g.length-1)l.addClass("killed");else{var r=parseInt(l[0].offsetHeight),f=parseInt(l[0].offsetWidth),h=o[l._positionY+l._positionX];v+r>window.innerHeight&&(h=p,t++,e=0);var v=i=h?0===e?h:h+d:p,C=n+t*(m+f);l.css(l._positionY,v+"px"),"center"==l._positionX?l.css("left",parseInt(window.innerWidth/2-f/2)+"px"):l.css(l._positionX,C+"px"),o[l._positionY+l._positionX]=v+r,c.maxCount>0&&g.length>c.maxCount&&0===a&&l.scope().kill(!0),e++}}},v=i(t)(l);v._positionY=s.positionY,v._positionX=s.positionX,v.addClass(s.type);var y=function(e){e=e.originalEvent||e,("click"===e.type||"opacity"===e.propertyName&&e.elapsedTime>=1)&&(l.onClose&&l.$apply(l.onClose(v)),v.remove(),g.splice(g.indexOf(v),1),l.$destroy(),f())};s.closeOnClick&&(v.addClass("clickable"),v.bind("click",y));var k=v.find("#close-element");if(k&&v.find("#close-element").bind("click",y),v.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",y),angular.isNumber(s.delay)){var b=n();v.mouseenter(function(){b&&clearTimeout(b),v.removeClass("killed")}),v.mouseleave(function(){b=n()})}o("none"),angular.element(document.getElementsByTagName("body")).append(v);var w=-(parseInt(v[0].offsetHeight)+50);if(v.css(v._positionY,w+"px"),g.push(v),"center"==s.positionX){var $=parseInt(v[0].offsetWidth);v.css("left",parseInt(window.innerWidth/2-$/2)+"px")}e(function(){o("")}),l._templateElement=v,l.kill=function(t){t?(l.onClose&&l.$apply(l.onClose(l._templateElement)),g.splice(g.indexOf(l._templateElement),1),l._templateElement.remove(),l.$destroy(),e(f)):l._templateElement.addClass("killed")},e(f),h||(angular.element(r).bind("resize",function(t){e(f)}),h=!0),C.resolve(l)}).error(function(e){throw new Error("Template ("+s.template+") could not be loaded. "+e)}),C.promise};return v.primary=function(e){return this(e,"primary")},v.error=function(e){return this(e,"error")},v.success=function(e){return this(e,"success")},v.info=function(e){return this(e,"info")},v.warning=function(e){return this(e,"warning")},v.clearAll=function(){angular.forEach(g,function(e){e.addClass("killed")})},v}]}),angular.module("ui-notification").run(["$templateCache",function(e){e.put("angular-ui-notification.html",'<div class="ui-notification"><h3 ng-show="title" ng-bind-html="title"></h3><div class="message" ng-bind-html="message"></div></div>')}]);